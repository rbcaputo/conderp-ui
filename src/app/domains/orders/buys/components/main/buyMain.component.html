<div class="header-container">

  <div class="title-container">

    <span class="material-symbols-rounded">
      list_alt
    </span>
    <span>
      ORDENS
    </span>
    <span class="material-symbols-rounded">
      chevron_right
    </span>
    <span class="material-symbols-rounded">
      shopping_cart
    </span>
    <span>
      COMPRAS
    </span>

  </div>
  <toolbar [dataSource]="dataSource" [entityType]="entityType" [entityName]="entityName"></toolbar>

</div>
<div *ngIf="dataSource.data.length === 0" class="empty-response-container">

  <span class="material-symbols-rounded">
    warning
  </span>
  <span>
    {{emptyResponseMessage}}
  </span>

</div>
<div class="table-paginator-container">

  <table mat-table *ngIf="dataSource.data.length > 0" [dataSource]="dataSource" matSort>

    <ng-container matColumnDef="publicId">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Cód. Identificador
      </th>
      <td mat-cell *matCellDef="let buy" class="public-id">
        {{buy.publicId}}
      </td>

    </ng-container>
    <ng-container matColumnDef="name">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Solicitante
      </th>
      <td mat-cell *matCellDef="let buy">
        {{buy.name}}
      </td>

    </ng-container>
    <ng-container matColumnDef="type">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Tipo
      </th>
      <td mat-cell *matCellDef="let buy">
        {{buy.buyType | typeName: BUY_TYPE_NAMES}}
      </td>

    </ng-container>
    <ng-container matColumnDef="subtype">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Subtipo(s)
      </th>
      <td mat-cell *matCellDef="let buy">
        @if (buy.buyType === buyTypes.Organic) {
        {{buy.buySubtype | typeName: ORGANIC_TYPE_NAMES}} - {{buy.organicSubtype | typeName: ORGANIC_SUBTYPE_NAMES}}
        } @else if (buy.buyType === buyTypes.Packaging) {
        {{buy.buySubtype | typeName: PACKAGING_TYPE_NAMES}}
        }
      </td>

    </ng-container>
    <ng-container matColumnDef="amount">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Quantidade (kg/un)
      </th>
      <td mat-cell *matCellDef="let buy">
        {{buy.amount}}
      </td>

    </ng-container>
    <ng-container matColumnDef="openDate">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Data de Abertura
      </th>
      <td mat-cell *matCellDef="let buy">
        {{buy.openDate | date: "dd/MM/yyyy"}}
      </td>

    </ng-container>
    <ng-container matColumnDef="status">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Situação
      </th>
      <td mat-cell *matCellDef="let buy"
        [class]="{'order-accepted' : buy.status === orderStatus.Accepted, 'order-delivered' : buy.status === orderStatus.Delivered, 'order-canceled' : buy.status === orderStatus.Canceled}">
        {{buy.status | typeName: ORDER_STATUS_NAMES}}
      </td>

    </ng-container>
    <ng-container matColumnDef="closeDate">

      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        Data de Fechamento
      </th>
      <td mat-cell *matCellDef="let buy">
        {{buy.closeDate | date: "dd/MM/yyyy"}}
      </td>

    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns; let buy"
      (click)="dialogService.openGetDialog(dialogService.entityType.Buy, buy);"></tr>

  </table>
  <mat-paginator [length]="dataSource.data.length" [pageSize]="50" showFirstLastButtons></mat-paginator>

</div>
